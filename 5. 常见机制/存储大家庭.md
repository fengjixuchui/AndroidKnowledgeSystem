## 存储大家庭如何学？

本模块没有先后顺序的强制，推荐使用**横向比较法**，梳理出各种不同存储方式的优缺点、使用场景、改造方式。

选择数据存储方法的**考虑点**：

1. 正确性  
- 支不支持多线程、跨进程同步操作
- 异常情况下数据的校验和恢复，比如 采用双写或者备份文件策略
2. 时间开销
- CPU 时间，包括 编解码、加解密
- I/O 事件
3. 空间开销
- 内存开销
- 硬盘开销，有没有采用压缩策略 如 zip、lzma等；编码格式是什么 如 xml、json、pb
4. 安全
- 需不需要加密手段 RSA、AES
5. 开发成本（或者说业务接入成本）
6. 兼容性
- 向前兼容：老的数据在升级后可以迁移
- 向后兼容：新的数据在老版本可以降级使用


## SharedPreferences

- [反思｜官方也无力回天？Android SharedPreferences的设计与实现](https://juejin.cn/post/6884505736836022280)
> 相信你总是听到“sp不安全”、“sp性能差”，“要用mmkv”之类的云云，那 sp 真的无可救药了吗？或者说，难道官方就改不动了吗？本文从设计者的角度来剖析这个问题，精彩精彩！就算不是来学习 SharedPreferences，本文的写作手法也值得学习。（是我一直想做的文章视角，好吧，我又鸽了）
> 
> 说句题外话，**源码+注释分析 的博客总结是非常差的一种学习方式**，因为这通常意味着**从结果倒推过程**，这往往导致被作者的思想牵着鼻子走。我建议，看之前要有自己的设想、疑问、预期，在阅读的过程中不断去比较自己的设想，重在思想的提炼。

